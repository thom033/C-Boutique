@model Vente
@{
    ViewData["Title"] = "Détails de la Vente";
}
<style>
    .form-container {
        margin-bottom: 100px;
    }
    .center-div {
        margin: auto;
        width: 80%;
        text-align: center;
    }
    table {
        margin-top: 20px;
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 8px;
    }
    th {
        background-color: #f2f2f2;
    }
    .table-container {
        display: flex;
        justify-content: space-between;
    }
    .table-container table {
        width: 48%;
    }
</style>

<div class="text-center form-container">
    <div class="center-div">
        <h1>Détails de la Vente</h1>
        
        <!-- Première table pour informations de vente -->
        <div class="table-container">
            <table>
                <tbody>
                    <tr>
                        <th scope="row">Id Vente</th>
                        <td>@Model.id</td>
                    </tr>
                    <tr>
                        <th scope="row">Désignation</th>
                        <td>@Model.designation</td>
                    </tr>
                    <tr>
                        <th scope="row">Magasin</th>
                        <td>@Model.idMagasin</td>
                    </tr>
                    
                    <tr>
                        <th scope="row">Remarque</th>
                        <td>@Model.remarque</td>
                    </tr>
                    <tr>
                        <th scope="row">État</th>
                        <td>@Model.etat</td>
                    </tr>
                </tbody>
            </table>

            <!-- Deuxième table pour informations complémentaires -->
            <table class="table table-bordered" id="facture-table">
                <tbody>
                    <tr>
                        <th scope="row">Client</th>
                        <td>@Model.idClient</td>
                    </tr>
                    <tr>
                        <th scope="row">Montant Total</th>
                        <td>@Model.venteDetails.Sum(v => v.qte * v.puVente)</td>
                    </tr>
                    <tr>
                        <th scope="row">Montant TVA</th>
                        <td>@Model.venteDetails.Sum(v => v.qte * v.tva)</td>
                    </tr>
                    <tr>
                        <th scope="row">Montant TTC</th>
                        <td>@Model.venteDetails.Sum(v => (v.qte * v.puVente) + (v.qte * v.tva))</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Liste des détails de vente -->
        <h3>Produits de la Vente</h3>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Produit</th>
                    <th>Quantité</th>
                    <th>Prix Unitaire</th>
                    <th>Prix d'Achat</th>
                    <th>Prix de Vente</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var detail in Model.venteDetails)
                {
                    <tr>
                        <td>@detail.idProduit</td>
                        <td>@detail.qte</td>
                        <td>@detail.pu</td>
                        <td>@detail.puAchat</td>
                        <td>@detail.puVente</td>
                        <td>@(detail.qte * detail.puVente)</td>
                    </tr>
                }
            </tbody>
        </table>

        <!-- Boutons de contrôle -->
        <div class="mt-4">
            <button type="button" class="btn btn-info">Viser</button>
            <button type="button" class="btn btn-warning">Annuler</button>
            <button type="button" class="btn btn-success">Modifier</button>
        </div>

        <!-- Onglets pour navigation entre les sections -->
        <ul class="nav nav-tabs mt-4">
            <li class="nav-item">
                <a class="nav-link active" href="#details" data-toggle="tab">Details</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#ecritures" data-toggle="tab">Ecritures</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#livraison-details" data-toggle="tab">Livraison Details</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#plan-de-payements" data-toggle="tab">Plan de Payements</a>
            </li>
        </ul>
        <div class="tab-content mt-3">
            <div class="tab-pane fade show active" id="details">
                <!-- Contenu pour Details -->
            </div>
            <div class="tab-pane fade" id="ecritures">
                <!-- Contenu pour Ecritures -->
            </div>
            <div class="tab-pane fade" id="livraison-details">
                <!-- Contenu pour Livraison Details -->
            </div>
            <div class="tab-pane fade" id="plan-de-payements">
                <!-- Contenu pour Plan de Payements -->
            </div>
        </div>
    </div>
</div>

<!-- Inclusion de Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<!-- Inclusion de FontAwesome pour l'icône -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
